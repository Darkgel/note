使用分布式锁来限制程序的并发执行

实现
    在redis2.8后，加入了set指令的扩展参数，使得setnx和expire指令可以一起执行

    set lock:codehole true ex 5 nx //如果不存在lock:codehole则设置，且5秒后过期（加锁）
    del lock:codehole //释放锁


超时问题
    redis的分布式锁不能解决超时问题，如果在加锁和释放锁之间的逻辑执行得太长，
    以至于超出了锁的超时限制，就会出现问题。

    为了避免这个问题，redis分布式锁不要用于较长时间的任务

    稍微安全一点的方法
        将set指令的value参数设置为一个随机数，释放锁时先匹配随机数是否一致

可重入性
    如果一个锁支持同一个线程的多次加锁，那么这个锁就是可重入的。

        